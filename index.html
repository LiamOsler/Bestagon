<!DOCTYPE html>
<html>
<head>
    <title>Molecule Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.3/css/dataTables.bootstrap5.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>


    <script type="importmap">
        {
            "imports": {
                "three": "/js/three.module.js",
                "GLTFLoader": "/js/GLTFLoader.js"
            }
        }
    </script>
</head>

<body>
    <div id = "three-area"></div>

    <script type= "module">
        import { OrbitControls } from '/js/OrbitControls.js';
        import { GLTFLoader } from '/js/GLTFLoader.js';
        import * as THREE from '/js/three.module.js';
        
        let scene, camera, renderer, controls, clock;
        let spotLight, light;
        let deltaTime = 0;
        let totalTime = 0;

        const loader = new GLTFLoader();

        // Load a glTF resource
        loader.load(
            // resource URL
            'hex.glb',
            // called when the resource is loaded
            function ( gltf ) {

                scene.add( gltf.scene );

                gltf.animations; // Array<THREE.AnimationClip>
                gltf.scene; // THREE.Group
                gltf.scenes; // Array<THREE.Group>
                gltf.cameras; // Array<THREE.Camera>
                gltf.asset; // Object

            },
            // called while loading is progressing
            function ( xhr ) {

                console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

            },
            // called when loading has errors
            function ( error ) {

                console.log( 'An error happened' );

            }
        );
        


        const threeArea = document.getElementById('three-area');


        function init(){
            clock = new THREE.Clock();

            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

            renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setClearColor( 0x000000, 1 );
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.body.appendChild( renderer.domElement );
            
            spotLight = new THREE.SpotLight( 0xffffff );
            spotLight.position.set( 100, 1000, 100 );
            scene.add( spotLight );

            light = new THREE.AmbientLight( 0xffffff );
            scene.add( light );

            camera.position.x = 5;
            camera.position.y = 5;
            camera.position.z = 5;

            const axesHelper = new THREE.AxesHelper( 5 );
            scene.add( axesHelper );

            controls = new OrbitControls( camera, renderer.domElement );

            const geometry = new THREE.BoxGeometry( 1, 1, 1 );
            const material = new THREE.MeshBasicMaterial( {color: 0x00ff00} );
            const cube = new THREE.Mesh( geometry, material );
            scene.add( cube );
        }
        
        function animate() {
            requestAnimationFrame( animate );
            renderer.render( scene, camera );
        
        }
        
        init();
        animate();

        window.addEventListener('resize', onResize, false);

        function onResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

</body>